const I=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function d(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(e){if(e.ep)return;e.ep=!0;const o=d(e);fetch(e.href,o)}};I();var U="/assets/beerhead.a943f72e.jpg";window.onload=L=>{const a=document.querySelector("#filename"),d=document.querySelector("#area"),r=document.querySelector("#canvas"),e=document.querySelector("#crop"),o=document.querySelector("#download"),l=r.getContext("2d"),m=R();let b=k();const s={};let p=null,h=!1;d.addEventListener("pointerdown",E),window.addEventListener("pointermove",S),window.addEventListener("pointerup",C),e.addEventListener("click",q),o.addEventListener("click",O);function E(t){s.x=t.clientX,s.y=t.clientY,h=!0}function S(t){if(!h)return;const n=d.getBoundingClientRect(),i=Math.floor(Math.min(Math.max(s.x,t.clientX),n.right)-n.x),c=Math.floor(Math.min(Math.max(s.y,t.clientY),n.bottom)-n.y),u=Math.floor(Math.max(Math.min(s.x,t.clientX),n.left)-n.x),f=Math.floor(Math.max(Math.min(s.y,t.clientY),n.top)-n.y),g=i-u,y=c-f,w=u,x=f,v=Math.floor(n.width)/r.width,M=Math.floor(n.height)/r.height;p={x:w/v,y:x/M,w:g/v,h:y/M},m.style.cssText=`
      transform: translate(${w}px, ${x}px);
      width: ${g}px;
      height: ${y}px;
    `}function C(t){h=!1}function q(){const{x:t,y:n,w:i,h:c}=p;r.width=i,r.height=c;const u=[t,n,i,c],f=[0,0,i,c];l.drawImage(b,...u,...f),m.removeAttribute("style")}function O(){r.toBlob(t=>{var c;const n=URL.createObjectURL(t),i=document.createElement("a");i.href=n,i.download=(c=a.textContent.trim())!=null?c:"crop.jpg",i.click(),URL.revokeObjectURL(n)})}function R(){const t=document.createElement("div");return t.id="draw-area",d.append(t),t}function k(){const t=new Image;return t.src=U,t.onload=n=>{r.height=t.naturalHeight,r.width=t.naturalWidth,l.drawImage(t,0,0),a.textContent=t.src.split("/").pop(),a.contentEditable="true"},t}};
