const j=function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const l of t.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function h(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerpolicy&&(t.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?t.credentials="include":n.crossorigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function a(n){if(n.ep)return;n.ep=!0;const t=h(n);fetch(n.href,t)}};j();window.onload=q=>{const c=document.querySelector("#filename"),h=document.querySelector("#file-area"),a=document.querySelector("#crop-area"),n=document.querySelector("#file-drop-overlay"),t=document.querySelector("#canvas"),l=document.querySelector("#crop"),k=document.querySelector("#download"),A=document.querySelector("#file-button"),s=document.querySelector("#file"),y=t.getContext("2d"),w=U(),d={};let m,g=null,p=!1;window.addEventListener("pointermove",O),window.addEventListener("pointerup",B),window.addEventListener("dragenter",e=>{n.classList.replace("hidden","grid")}),n.addEventListener("dragleave",e=>{n.classList.replace("grid","hidden")}),window.addEventListener("dragover",e=>e.preventDefault()),window.addEventListener("drop",e=>{e.preventDefault(),v(e.dataTransfer.files[0])}),a.addEventListener("pointerdown",C),l.addEventListener("click",I),k.addEventListener("click",R),A.addEventListener("click",e=>{s.click()}),s.addEventListener("change",e=>{s.files.length&&v(s.files[0])});async function v(e){m=await createImageBitmap(e),$(m),c.textContent=e.name,c.contentEditable="true",h.remove(),a.classList.remove("hidden")}function C(e){d.x=e.clientX,d.y=e.clientY,p=!0}function O(e){if(!p)return;const o=a.getBoundingClientRect(),r=Math.floor(Math.min(Math.max(d.x,e.clientX),o.right)-o.x),i=Math.floor(Math.min(Math.max(d.y,e.clientY),o.bottom)-o.y),u=Math.floor(Math.max(Math.min(d.x,e.clientX),o.left)-o.x),f=Math.floor(Math.max(Math.min(d.y,e.clientY),o.top)-o.y),x=r-u,L=i-f,E=u,M=f,b=Math.floor(o.width)/t.width,S=Math.floor(o.height)/t.height;g={x:E/b,y:M/S,w:x/b,h:L/S},w.style.cssText=`
      transform: translate(${E}px, ${M}px);
      width: ${x}px;
      height: ${L}px;
    `}function B(e){p=!1}function I(){const{x:e,y:o,w:r,h:i}=g;t.width=r,t.height=i;const u=[e,o,r,i],f=[0,0,r,i];y.drawImage(m,...u,...f),w.removeAttribute("style")}function R(){t.toBlob(e=>{var i;const o=URL.createObjectURL(e),r=document.createElement("a");r.href=o,r.download=(i=c.textContent.trim())!=null?i:"crop.jpg",r.click(),URL.revokeObjectURL(o)})}function U(){const e=document.createElement("div");return e.id="draw-area",a.append(e),e}function $(e){t.height=e.height,t.width=e.width,y.drawImage(e,0,0)}};
